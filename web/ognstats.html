<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>OGN statistics</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

  <script>

  var baseUrl="http://ec2-52-18-228-171.eu-west-1.compute.amazonaws.com:8080";

  var init = function(dateText) {
     var chartUrl1 = baseUrl+"/ogn-gateway-web/charts/toprec-range/"+dateText+"/20";
     document.getElementById("chart").innerHTML = "<img src="+"'"+chartUrl1+"'"+"/>";

     var chartUrl2 = baseUrl+"/ogn-gateway-web/charts/toprec-count/"+dateText+"/20";
     document.getElementById("chart2").innerHTML = "<img src="+"'"+chartUrl2+"'"+"/>";
     
     var tableUrl1 = "reception-range.html?date="+dateText;
     document.getElementById("iframe1").src = tableUrl1;

     var tableUrl2 = "beacons-count.html?date="+dateText;
     document.getElementById("iframe2").src = tableUrl2;
  };

  $(function() {
     
     $("#date").datepicker({
        dateFormat: "yy-mm-dd",
        onSelect: function(dateText, inst)
            {
               init(dateText);
            }
    }).datepicker("setDate",new Date());

  });

  $( document ).ready(function() {
    init(document.getElementById("date").value);
  });

  </script>
</head>
<body>

<p>Date: <input type="text" name="date" id="date"></p>

<h2>Reception range</h2>
<table>
  <tr>
    <td><div id="chart"> </div> </td>
    <td>
        <iframe id="iframe1" width="420" height="584">
           Sorry your browser does not support inline frames.
        </iframe>
    </td>
  </tr>
</table>

<h2>Number of received beacons</h2>
<table>
  <tr>
    <td><div id="chart2"> </div> </td>
    <td>
        <iframe id="iframe2" width="420" height="584">
           Sorry your browser does not support inline frames.
        </iframe>
    </td>
  </tr>
</table>

</body>
</html>
